// 设置页面专用样式
// 避免与首页样式冲突，使用独立的样式作用域

.settings-layout {
  min-height: 100vh;
  background: var(--base-dark);
  color: var(--text-primary);
  display: flex;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

  // 星空背景效果
  &::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      radial-gradient(circle at 20% 80%, var(--primary-lighter) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, var(--secondary-lighter) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, var(--accent-blue-light) 0%, transparent 50%);
    z-index: 0;
    pointer-events: none;
  }
}

.sidebar {
  width: 280px;
  background: var(--glass-bg);
  border-right: 1px solid var(--glass-border);
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 1;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.sidebar-header {
  padding: 16px 16px 16px 24px;
  border-bottom: 1px solid var(--glass-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  h2 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .header-right { display: flex; align-items: center; gap: 12px; }
}

.user-info {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 8px;
  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);

  &:hover {
    background: var(--surface-hover);
  }

  .username {
    font-size: 16px;
    color: var(--text-secondary);
    font-weight: 500;
  }
}

.sidebar-footer {
  padding: 24px;
  border-top: 1px solid var(--glass-border);
  margin-top: auto;
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--surface-1);
  position: relative;
  z-index: 1;
}

.content-header {
  padding: 24px 32px;
  border-bottom: 1px solid var(--border-secondary);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  background: var(--surface-1);
}

.content-body {
  flex: 1;
  padding: 32px;
  overflow-y: auto;
}

// NaiveUI 组件样式覆盖 - 使用更具体的选择器避免污染
.settings-layout {
  // 菜单样式
  :deep(.n-menu) {
    flex: 1;
    padding: 16px 0;
    background: transparent;

    .n-menu-item {
      border-radius: 12px;
      margin: 2px 16px;
      transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
      position: relative;
      overflow: hidden;
      color: var(--text-primary) !important;

      &:hover {
        background: var(--surface-hover) !important;
      }

      &.n-menu-item--selected {
        background: var(--primary-light) !important;
        color: var(--text-primary) !important;
        font-weight: 500;
        box-shadow: var(--shadow-glow);

        .n-menu-item-content-header {
          color: var(--text-primary) !important;
        }
      }

      .n-menu-item-content {
        font-size: 16px;
        color: var(--text-primary) !important;
      }

      .n-menu-item-content-header {
        color: var(--text-primary) !important;
      }
    }
  }

  // 面包屑样式
  :deep(.n-breadcrumb) {
    .n-breadcrumb-item {
      color: var(--text-secondary) !important;

      &:hover {
        color: var(--text-primary) !important;
      }
    }

    .n-breadcrumb-item__separator {
      color: var(--text-tertiary) !important;
    }
  }

  // 按钮样式
  :deep(.n-button) {
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);

    &.n-button--primary-type {
      background: var(--primary-gradient) !important;
      border: none !important;
      color: var(--text-inverse) !important;
      box-shadow: var(--shadow-glow);

      &:hover {
        box-shadow: var(--shadow-glow-strong);
        transform: translateY(-1px);
      }
    }

    &.n-button--secondary-type {
      background: var(--surface-1) !important;
      border: 1px solid var(--border-primary) !important;
      color: var(--text-primary) !important;

      &:hover {
        background: var(--surface-hover) !important;
        border-color: var(--border-focus) !important;
      }
    }
  }

  // 输入框样式
  :deep(.n-input) {
    .n-input-wrapper {
      background-color: var(--surface-1) !important;
      border: 1px solid var(--border-primary) !important;
    }

    .n-input__input-el {
      color: var(--text-primary) !important;
      background: transparent !important;
    }

    .n-input__placeholder {
      color: var(--text-tertiary) !important;
    }

    &:hover .n-input-wrapper {
      border-color: var(--border-focus) !important;
    }

    &:focus-within .n-input-wrapper {
      border-color: var(--border-focus) !important;
      box-shadow: 0 0 0 2px var(--primary-light) !important;
    }
  }

  // 选择器样式
  :deep(.n-select) {
    .n-base-selection {
      background-color: var(--surface-1) !important;
      border: 1px solid var(--border-primary) !important;

      .n-base-selection-label {
        color: var(--text-primary) !important;
      }

      .n-base-selection-placeholder {
        color: var(--text-tertiary) !important;
      }
    }

    &:hover .n-base-selection {
      border-color: var(--border-focus) !important;
    }

    &.n-select--focused .n-base-selection {
      border-color: var(--border-focus) !important;
      box-shadow: 0 0 0 2px var(--primary-light) !important;
    }
  }

  // 表格样式
  :deep(.n-data-table) {
    background: var(--surface-1) !important;
    border-radius: 12px;

    .n-data-table-th {
      background: var(--surface-2) !important;
      color: var(--text-primary) !important;
      font-weight: 600;
    }

    .n-data-table-td {
      color: var(--text-primary) !important;
      border-bottom: 1px solid var(--border-secondary) !important;
    }

    .n-data-table-tr:hover .n-data-table-td {
      background: var(--surface-hover) !important;
    }
  }

  // 分页样式
  :deep(.n-pagination) {
    .n-pagination-item {
      color: var(--text-secondary) !important;
      background: var(--surface-1) !important;
      border: 1px solid var(--border-primary) !important;

      &:hover {
        background: var(--surface-hover) !important;
        color: var(--text-primary) !important;
      }

      &.n-pagination-item--active {
        background: var(--primary) !important;
        color: var(--text-inverse) !important;
        border-color: var(--border-focus) !important;
      }
    }

    .n-pagination-quick-jumper {
      color: var(--text-secondary) !important;
    }

    .n-pagination-size-picker {
      color: var(--text-secondary) !important;
    }
  }

  // 卡片样式
  :deep(.n-card) {
    background: var(--glass-bg) !important;
    border: 1px solid var(--glass-border) !important;
    color: var(--text-primary) !important;

    .n-card-header {
      color: var(--text-primary) !important;
      font-weight: 600;
    }
  }
}

// 全局强制样式覆盖 - 确保在设置页面生效
.settings-layout {
  // 数据表格样式覆盖
  :deep(.n-data-table) {
    background-color: var(--surface-1) !important;

    .n-data-table-wrapper {
      background-color: transparent !important;
    }

    .n-data-table-table {
      background-color: transparent !important;
    }

    .n-data-table-thead {
      background-color: var(--surface-2) !important;

      .n-data-table-th {
        background-color: transparent !important;
        color: var(--text-primary) !important;
        border-bottom: 1px solid var(--border-secondary) !important;
      }
    }

    .n-data-table-tbody {
      .n-data-table-tr {
        background-color: transparent !important;

        &:hover {
          background-color: var(--surface-hover) !important;
        }

        .n-data-table-td {
          background-color: transparent !important;
          color: var(--text-primary) !important;
          border-bottom: 1px solid var(--border-secondary) !important;
        }
      }
    }
  }

  // 卡片组件样式覆盖
  :deep(.n-card) {
    background-color: var(--glass-bg) !important;
    border: 1px solid var(--glass-border) !important;

    .n-card-header {
      color: var(--text-primary) !important;
      border-bottom: 1px solid var(--border-secondary) !important;
    }

    .n-card__content {
      color: var(--text-primary) !important;
    }
  }

  // 强制覆盖所有白色背景容器
  :deep(.n-card),
  :deep(.n-card .n-card__content),
  :deep(.content-card),
  :deep(.data-table-container),
  :deep(.table-container),
  :deep(.table-card),
  :deep(.stat-card),
  :deep(.management-card),
  :deep(.toolbar) {
    background-color: var(--glass-bg) !important;
    border: 1px solid var(--glass-border) !important;
  }

  // 修复表格容器背景
  :deep(.n-data-table-wrapper),
  :deep(.n-data-table-base-table-wrapper) {
    background-color: transparent !important;
  }

  // 特别处理活动管理和成员管理页面的卡片
  :deep(.activity-management .table-card),
  :deep(.member-management .table-card),
  :deep(.config-management .table-card),
  :deep(.activity-management .management-card),
  :deep(.member-management .management-card),
  :deep(.config-management .management-card) {
    background-color: var(--glass-bg) !important;
    border: 1px solid var(--glass-border) !important;

    .n-card__content {
      background-color: transparent !important;
    }
  }

  // 通用白色背景覆盖 - 最高优先级
  :deep([style*="background-color: rgb(255, 255, 255)"]),
  :deep([style*="background-color: white"]),
  :deep([style*="background: rgb(255, 255, 255)"]),
  :deep([style*="background: white"]) {
    background-color: var(--surface-1) !important;
    background: var(--surface-1) !important;
  }

  // 分页组件样式覆盖
  :deep(.n-pagination) {
    .n-pagination-item {
      background-color: var(--surface-1) !important;
      color: var(--text-primary) !important;
      border: 1px solid var(--border-primary) !important;

      &:hover {
        background-color: var(--surface-hover) !important;
        border-color: var(--border-focus) !important;
      }

      &.n-pagination-item--active {
        background-color: var(--primary) !important;
        border-color: var(--border-focus) !important;
        color: var(--text-inverse) !important;
      }
    }

    .n-pagination-prefix,
    .n-pagination-suffix {
      color: var(--text-secondary) !important;
    }
  }
}

  // Modal 对话框全局可读性修复（统一非透明背景与文字颜色）
  :deep(.n-modal) {
    .n-dialog {
      background-color: var(--surface-1) !important;
      border: 1px solid var(--border-primary) !important;
      color: var(--text-primary) !important;
    }
    .n-dialog__title { color: var(--text-primary) !important; }
    .n-dialog__content { color: var(--text-secondary) !important; }

    // 表单元素与标签
    .n-form-item-label, .n-form-item-label__text { color: var(--text-secondary) !important; }
    .n-form-item-feedback, .n-form-item-feedback__line { color: var(--text-secondary) !important; }

    // 输入与选择在弹窗中的可读性
    .n-input .n-input__input-el { color: var(--text-primary) !important; }
    .n-input .n-input__placeholder, .n-input__input-el::placeholder { color: var(--text-tertiary) !important; }
    .n-base-selection-label { color: var(--text-primary) !important; }
    .n-base-selection-placeholder { color: var(--text-tertiary) !important; }
  }


// 响应式设计
@media (max-width: 768px) {
  .settings-layout {
    flex-direction: column;
  }

  .sidebar {
    width: 100%;
    height: auto;
  }

  .content-body {
    padding: 16px;
  }
}

// 全局文字和输入框修复 - 应用到整个设置页面
.settings-layout {
  // 页面标题和文字颜色修复
  .page-header {
    h1 {
      color: var(--text-primary) !important;
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    p {
      color: var(--text-secondary) !important;
      font-size: 16px;
      line-height: 1.5;
    }
  }

  // 强制覆盖所有标题颜色
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
  }

  // 强制覆盖所有段落文字颜色
  p {
    color: var(--text-secondary) !important;
  }
}

// 全局输入框和选择框修复 - 不限制在 settings-layout 内
:deep(.n-input) {
  .n-input-wrapper {
    background-color: var(--surface-1) !important;
    border: 1px solid var(--border-primary) !important;
  }

  .n-input__input-el {
    color: var(--text-primary) !important;
    background-color: transparent !important;

    &::placeholder {
      color: var(--text-tertiary) !important;
    }
  }

  .n-input__prefix,
  .n-input__suffix {
    color: var(--text-secondary) !important;
  }
}

// 全局选择框修复
:deep(.n-select) {
  .n-base-selection {
    background-color: var(--surface-1) !important;
    border: 1px solid var(--border-primary) !important;

    .n-base-selection-label {
      color: var(--text-primary) !important;
    }

    .n-base-selection-placeholder {
      color: var(--text-tertiary) !important;
    }
  }
}

// 全局标题和文字颜色修复 - 覆盖所有设置页面
.main-content {
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
  }

  p {
    color: var(--text-secondary) !important;
  }

  .page-header {
    h1 {
      color: var(--text-primary) !important;
    }

    p {
      color: var(--text-secondary) !important;
    }
  }

  // 覆盖仪表板标题
  .dashboard-header {
    h1 {
      color: var(--text-primary) !important;
    }

    p {
      color: var(--text-secondary) !important;
    }
  }
}

// 强制覆盖所有页面组件的标题样式 - 最高优先级
.dashboard,
.member-management,
.activity-management,
.config-management {
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
  }

  p {
    color: var(--text-secondary) !important;
  }

  .page-header,
  .dashboard-header {
    h1 {
      color: var(--text-primary) !important;
    }

    p {
      color: var(--text-secondary) !important;
    }
  }
}

// 全局输入框修复 - 最高优先级，覆盖所有组件
.n-input {
  .n-input-wrapper {
    background-color: var(--surface-1) !important;
    border: 1px solid var(--border-primary) !important;
  }

  .n-input__input-el {
    color: var(--text-primary) !important;
    background-color: transparent !important;

    &::placeholder {
      color: var(--text-tertiary) !important;
    }
  }

  .n-input__prefix,
  .n-input__suffix {
    color: var(--text-secondary) !important;
  }
}

// 全局选择框修复 - 最高优先级
.n-select {
  .n-base-selection {
    background-color: var(--surface-1) !important;
    border: 1px solid var(--border-primary) !important;

    .n-base-selection-label {
      color: var(--text-primary) !important;
    }

/* 主题开关样式（侧边栏顶部） */
.theme-switcher {
  display: flex;
  align-items: center;

  :deep(.n-switch) {
    --n-rail-height: 22px;
    --n-rail-width: 44px;
    --n-button-width: 18px;
    --n-button-height: 18px;

    .n-switch__rail { border: none; transition: none; border-radius: 11px; }
    .n-switch__button { background: var(--glass-bg); border: none; transition: none; border-radius: 9px; box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
  }
}


    .n-base-selection-placeholder {
      color: var(--text-tertiary) !important;
    }
  }
}
